import CommentCommitPush from '/comment-commit-push.mdx';

# TP2: Julie Pro Plus!
üöß Les instructions de ce TP sont encore en r√©vision et sa grille de correction n'est pas encore disponible

## Consignes (20% de la note finale)
- Lisez toutes les instructions et la grille de correction avant de commencer
- Cr√©ez un Repository ``PRIV√â`` √† partir du template fournit pour le TP2
- Vous **DEVEZ** faire au moins les migrations et les commits demand√©s mais vous pouvez en faire plus sans probl√®me, tant que vous les documentez correctement

## Terminez de mettre en place **i18n**
#### Ce qui est d√©j√† fait :
   - Les packages nuget sont install√©s
   - Les **vues** sont d√©j√† traduites!
   - Les **mod√®les** aussi!
   - Le Inject du **IViewLocalizer** est aussi d√©j√† pr√©sent

#### Ce qu‚Äôil faut faire :
   - Il faut configurer **i18n** dans **Program.cs**. Les fichiers de traduction **resx** se trouvent dans le r√©pertoire **/i18n/**
   - Il faut ajouter une fonction **SetLanguage** au **HomeController**
   - Finalement, Il manque le commutateur de langue dans le **_Layout**. Utilisez une vue partielle et nommez-la **_SelectLanguage**

<CommentCommitPush/>

## Faites fonctionner le filtre

1. Impl√©mentez la fonction **Filter** du **TrainerController**
2. Impl√©menter la m√©thode **GetAllAsync** du service **TrainerService** pour prendre en compte les param√®tres de pagination de **TrainerSearchViewModelFilter**
3. Dans la m√™me m√©thode, il faut √©galement ajouter des **Where** pour filtrer selon chacun des crit√®res de recherche de **TrainerSearchViewModelFilter**

:::info

Voici comment faire une requ√™te pour une condition optionnelle dans Linq et ne filtrer que lorsque l'on s√©lectionne une valeur dans le filtre. 

:::

```csharp

.Where(x=> filter.SelectedCategoryId == null || x.CategoryId == filter.SelectedCategoryId ).ToList() 

```

<CommentCommitPush/>

## Affichez le d√©tail d'un **Trainer** dans la page **Trainer/Index**

1. √âcrivez du javascript pour ajouter la classe **show** √† l‚Äô√©l√©ment enfant **aside** lorsqu'on survole le **card** d‚Äôun entra√Æneur.
2. √âcrivez du javascript pour retirer la classe **show** √† l‚Äô√©l√©ment enfant **aside** lorsqu'on ne survole plus le **card**.

:::info

 Comme **aside** est un enfant de **card**, si l'utilisateur bouge sa souris √† l'ext√©rieur de la photo de l'entra√Æneur vers le **aside**, la souris est toujours techniquement au dessus de **card** et √ßa ne cause pas d'√©v√™nement **onmouseout**. **√áa tombe bien, c'est exactement ce que l'on veut!**

:::

<CommentCommitPush/>

## Faire fonctionner la pagination

1. Il faut maintenant utiliser **Items** du mod√®le **TrainerSearchViewModel** qui est un **IPagniatedList&ltTrainer&gt** pour bien afficher les liens de navigations
2. Mettez le code pour que l‚Äôensemble des pages disponibles soient affich√©es dans la pagination.
3. Ajoutez la logique que Previous et Next fonctionnent et s'affichent lorsque n√©cessaire. 

![Image Reference](/tps/tp2/navigation.png)

4. Ajoutez le javascript pour que quand on clique sur les √©l√©ments de pagination, que la page change dans le filtre du formulaire et qu'il se soumette automatiquement. Utilisez les attributs **data-page-id** qui sont d√©j√† l√†.
5. Mettre le **SelectedPageIndex** sur le formulaire en **type="hidden"** et supprimez le libell√©.

<CommentCommitPush/>

## G√©n√©rez les vues et contr√¥leur (RecordController) du mod√®le Record

:::warning

 Au moment de g√©n√©rez le contr√¥leur il faut le nommer **RecordController** et non pas **RecordsController** (Donc, pas de s!).
 C'est important car les liens existants et les fichiers de traduction utilisent tous Record et non pas Records!

:::

1. G√©n√©rez un contr√¥leur MVC avec ses vues pour le mod√®le Record. (Un lien vers cette vue existe d√©j√† dans la barre de navigation)
2. Lorsqu‚Äôil y a un dropdown, au lieu de le mettre dans le ViewData ou le ViewBag, faites un ViewModel (**RecordViewModel**) (ou plusieurs) avec les SelectList et les informations du mod√®le.

:::warning

Il existe d√©j√† des fichiers .resx pour le view model **RecordViewModel**, si vous utilisez un autre nom ou utiliez d'autres view models, il faudra s'assurer de les traduire.

:::

3. Lorsque vous affichez **Trainer**:
   - Affichez le **nom complet** du **Trainer**
4. Lorsque vous affichez **Discipline** 
   - Affichez le **nom** de la **Discipline**
5. Faites un service pour utiliser ce/ces ViewModels
6. Utilisez le service dans le contr√¥leur 
7. Ajoutez une action √† votre contr√¥leur qui permet de voir les **Records** d'un **Trainer** Record/TrainerIndex(int trainerId)
   - Il existe d√©j√† un ic√¥ne de troph√© sur la vue d√©taill√© du Trainer qui doit permettre d'afficher cette page
8. Assurez-vous que vos nouvelles pages sont bien traduites 
   - Les resx sont d√©j√† l√†, utilisez-les
   - Il manque la traduction des messages d‚Äôerreur
9. Mettre le code/librairies permettant d‚Äô√©diter les d√©cimales pour que l‚Äô√©dition et la cr√©ation du montant fonctionne en fran√ßais.

<CommentCommitPush/>

## BONUS
1. Ex√©cuter le filtre lorsqu‚Äôon change n‚Äôimporte quel param√®tre du filtre
